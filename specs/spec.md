## 1. 核心功能

* **基础 KV 操作：** 支持 `Set(key, value)`、`Get(key)`、`Delete(key)`。
  - Set 已存在 key 时覆盖旧值（Redis 语义）
  - Delete 不存在的 key 静默成功
  - Get 过期 key 视为不存在（惰性删除）
* **数据约束：**
  - Key 最大长度 256 字节
  - Value 最大大小 1MB
  - Key 支持 UTF-8 字符串，不允许空字符串
* **过期机制 (TTL)：** 支持为每个 Key 设置生存时间，到期自动删除。TTL 精度为秒级。
* **内存管理：** 支持配置 maxmemory（默认 256MB），达到上限时拒绝写入并返回错误。
* **并发安全：** 支撑多 Goroutine 高并发读写。
* **持久化：** 数据定期落盘，支持 AOF + RDB 双持久化，服务重启后恢复数据。
* **API 访问：** 提供 HTTP RESTful 接口进行远程操作。
* **CLI 访问：** 提供本地 CLI 命令行进行操作。CLI 工具名为 `kvcli`，服务端为 `kvd`。
* **GUI 访问：** 提供 Windows 桌面 GUI 应用程序 (`kvgui`)，功能等价于 CLI。基于 Wails v2 + WebView2，复用 `pkg/client` SDK 与服务端通信。编译为单个 `.exe`。

## 2. 扩展功能

* **监控统计：** 支持 API 或 CLI 实时查看统计数据，具体指标包括：key 总数、内存占用、命中/未命中次数、请求计数（按操作类型）、运行时长。
* **数据快照：** 支持 API 或 CLI 手动触发 RDB 快照。RDB 与 AOF 并存（双持久化模式），RDB 支持条件自动触发（N 秒内 M 次修改）和手动触发。

## 3. 非功能性需求

* **日志：** 使用标准库 `log/slog`，支持 info/warn/error 级别。
* **配置：** 通过 YAML 配置文件管理，包括端口、数据目录、分片数、maxmemory、AOF/RDB 参数。
* **安全：** 第一版不做认证，预留 middleware 扩展点。

## 4. GUI 功能需求

* **连接管理：** 支持配置服务器地址（Host + Port），连接/断开操作，实时连接状态显示（绿色已连接/红色未连接）。启动时默认 localhost:6380。
* **KV 操作：** 支持 Set（含可选 TTL）、Get、Delete、Exists、TTL 查询，通过 Tab 切换不同操作类型，动态表单。
* **操作日志：** 仿终端风格输出面板，记录所有操作的命令和结果，支持清除历史。
* **监控仪表盘：** 卡片式展示 Keys 数量、内存占用（人类可读格式）、命中/未命中次数、运行时长（人类可读格式）、请求分类统计。支持手动刷新。
* **快照管理：** 支持手动触发 RDB 快照，显示快照状态和文件路径。
* **单文件部署：** 编译为单个 `.exe` 文件，前端资源嵌入二进制，无需额外安装。
* **运行环境：** Windows 10/11，依赖 WebView2 运行时（Windows 11 自带，Windows 10 首次运行自动安装）。
